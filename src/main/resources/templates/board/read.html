<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="/assets/images/pabicon.png" >
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>부산투어서비스 자유게시판</title>

    <!-- Bootstrap core CSS -->
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="/assets/css/fontawesome.css">
    <link rel="stylesheet" href="/assets/css/templatemo-woox-travel.css">
    <link rel="stylesheet" href="/assets/css/owl.css">
    <link rel="stylesheet" href="/assets/css/animate.css">
    <link rel="stylesheet"href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>
<!--

TemplateMo 580 Woox Travel

https://templatemo.com/tm-580-woox-travel

-->
  </head>

<body>

  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="/" class="logo2">
                        <img src="/assets/images/logo2.png" alt="">
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li><a style=" border-radius: 0px;" class="menu-item" href="/tour_spot/list">관광지</a></li>
                        <li><a style=" border-radius: 0px;" class="menu-item" href="/restaurant/list">음식점</a></li>
                        <li><a style=" border-radius: 0px;" class="menu-item" href="/hotel/list">숙소</a></li>
                        <li>
							<a class="menu-item" href="/board/list" style=" border-radius: 0px;">자유 게시판</a>
						</li>
                        
						<li sec:authorize="isAuthenticated()" class="menu-item-container" >
							<a class="menu-item" href="/member/mypage" style="width: max-content; border-radius: 0px;"
								>[[${loginUser.member.nickname}]]님</a>
							<div class="menu-container" style="width: max-content; text-align: center;" >
								<a class="menu-item" href="/member/mypage" style=" border-radius: 0px;">마이페이지</a>
								<a class="menu-item" href="/complain/list" style=" border-radius: 0px;">고객문의</a>
								<a class="menu-item" href="/member/logout" style=" border-radius: 0px;">로그아웃</a>
							</div>
						</li>
						
						<li sec:authorize="isAnonymous()">
							<a href="/member/login" class="menu-item" style="width: max-content; border-radius: 0px;">로그인</a>
						</li>
                    </ul>
						
                    <a class='menu-trigger' >
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

  <div class="page-heading">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <h4>Busan Tour Service</h4>
          <h2>부산여행</h2>
          <div class="border-button text-center"><a href="about.html">자세히 보기</a></div>
        </div>
      </div>
    </div>
  </div>

  <!--<div class="search-form">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <form id="search-form" name="gs" method="submit" role="search" action="#">
            <div class="row">
              <div class="col-lg-2">
                <h4>카테고리:</h4>
              </div>
              <div class="col-lg-4">

                  <fieldset>
                      <select name="Location" class="form-select" aria-label="Default select example" id="chooseLocation" onChange="this.form.click()">
                          <option selected>대표 관광지</option>
                          <option type="checkbox" name="option1" value="광안리">광안리</option>
                          <option value="해운대">해운대</option>
                          <option value="미정">미정</option>
                          <option value="미정">미정</option>
                          <option value="미정">미정</option>
                          <option value="미정">미정</option>
                          <option value="미정">미정</option>
                          <option value="미정">미정</option>
                          <option value="미정">미정</option>
                      </select>
                  </fieldset>
              </div>-->
              <!--<div class="col-lg-4">
=======
              <div class="col-lg-3">
>>>>>>> sub/sungmin:src/main/resources/templates/board/list.html
                  <fieldset>
                      <select name="Price" class="form-select" aria-label="Default select example" id="choosePrice" onChange="this.form.click()">
                          <option selected>Price Range</option>
                          <option value="100">$100 - $250</option>
                          <option value="250">$250 - $500</option>
                          <option value="500">$500 - $1,000</option>
                          <option value="1000">$1,000 - $2,500</option>
                          <option value="2500+">$2,500+</option>
                      </select>
                  </fieldset>
<<<<<<< HEAD:src/main/resources/templates/deals.html
              </div>-->
              <!--<div class="col-lg-2">                        
                  <fieldset>
                      <button class="border-button">검색</button>
                  </fieldset>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>-->
  
  <style>
  
  .bulletin-board-container {
      max-width: 1300px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

    .bulletin-board-container table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
  }

    .bulletin-board-container th,
    .bulletin-board-container td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
  }

    .search-bar {
      margin-top: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
  }

    .search-bar input[type="text"] {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
  }

    .search-bar button {
      padding: 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
  }

    .search-bar label {
      margin-right: 10px
  }
    
	.border-button {
      text-align: right;
  }
 
    .border-button a {
    margin-left: 10px;
  }
 
    .page-numbers {
    text-align: center;
    margin-top: 20px;
  }

  .page-numbers li {
    display: inline-block;
    margin: 0 5px;
  }

  .call-to-action {
    position: fixed;
    bottom: 20px;
    right: 20px;
  }

  .call-to-action .border-button {
    text-align: center;
  }
  
  .bd .clear {
	  display: block;
	  position: relative;
	  clear: both;
  }
  
  .bd .clear:after, .bd:after {
	  content: "";
	  display: block;
	  clear: both;
  }
  
  .bd {
	  color: #22b3c1
  }
  
  element.style {
	  margin: 0 15px 20px;
  }
  
  .rd_hd {
	  margin: 0 0 20px!important;
  }
  
  .bd, .bd button, .bd input, .bd select, .bd table,
  .bd textarea {
	  font-size: 13px;
	  line-height: 1.5;
  }
  
  .rd_hd .board h1 {
	  font-size: 17px;
	  line-height: 18px;
  }
  
  .rd_hd .board h1 {
	  text-overflow: ellipsis;
	  margin: 0;
  }
  
  h1 {
	  display: block;
	  margin-block-start: 0.67em;
	  margin-block-end: 0.67em;
	  margin-inline-start: 0px;
	  margin-inline-end: 0px;
	  font-weight: bold;
  }
  
  .rd_hd .board .top_area {
	  padding: 11px;
	  border-top: 1px solid #ccc;
	  border-bottom: 1px solid #ccc;
	  background: #fcfcfc;
  }
  
  .rd_hd .board .btm_area {
	  margin: -12px 12px 0;
	  padding: 0 0 18px;
	  background: 0 0;
  }
  
  .rd_hd .board .btm_area {
	  position: static;
	  border-bottom: 1px solid #eee;
  }
  
  .rd_hd .board .side {
	  float: none;
	  padding: 0;
  }
  
  .rd_hd .board .side {
	  display: inline-block;
	  padding: 9px;
  }
  
  .metadata-container {
      display: flex;
      justify-content: flex-end;
      margin-top: 20px;
  }

  .metadata-container span {
      margin-left: 20px; /* Adjust the margin as needed */
  }
  </style>
  
  <!-- *** 게시판 읽기 Start *** -->
  <div class="bulletin-board-container">
   <table th:object="${board}">
    <div class="rd_hd clear" style="margin:0 -15px 20px">
	 <div class="board clear " style="margin: auto;">
		 
	  <div class="top_area ngeb" style="margin: auto;">
		<span class="*{wr_date}" th:text="${#temporals.format(board.wr_date, 'yyyy-MM-dd HH:mm')}" style="display: inline-block; float: right;"></span>
	   <h1 class="*{b_title}">
		   <span class="*{b_title}"></span>
	   </h1>
	   <div class="clear" th:text="*{b_title}">
		  
	   </div>
	  </div>
	  <div class="metadata-container">
		<span>조회수:
		 <div class="side fr"  th:text="*{b_view_count}"></div>  
	  	</span>
	  	<span>좋아요:
		 <div class="side fr"  th:text="*{b_like_count}"></div>  
	  	</span>
	  	<span>댓글:
		 <div class="side fr"  th:text="*{b_com_count}"></div>  
	  	</span>
	  </div>
	 </div>	
	</div>
	 <article>
	   <div class="*{b_contents}" th:text="*{b_contents}"></div>
	 </article>

   </table>
   <div class="center">
     <input type="button" onclick="location.href='/board/list'" value="목록으로">
     <th:block th:if="${#authentication.name == board.member_id}">
     <input type="button" th:onclick="|location.href='/board/update?board_id=${board.board_id}'|" value="수정하기">
     <input type="button" th:onclick="|location.href='/board/delete?board_id=${board.board_id}'|" value="삭제하기">
      </th:block>
   </div>
  </div>
  <!-- *** 게시판 읽기 End *** -->
  
  <!-- *** 댓글 읽기 Start *** -->
  
  <div class="container" style="margin-top: 20px;">
	<div  style="width: fit-content; margin: auto;">
		<label for="reply">리플 쓰기</label>
		<input type="button" value="등록" onclick="writeReply()">
		<br><p></p>
		<textarea rows="2" cols="90" id="reply" name="reply"></textarea>
	</div>
	<p></p>
	<div id="replies">
		
	</div>
	</div>
	
	<!-- *** 댓글 읽기 End ***-->
  
  <div class="visit-country" style="margin: auto;">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="items">
            <div class="row">
              
              <div class="col-lg-12">
                <ul class="page-numbers">
                  <li><a href="#"><i class="fa fa-arrow-left"></i></a></li>
                  <li><a href="#">1</a></li>
                  <li class="active"><a href="#">2</a></li>
                  <li><a href="#">3</a></li>
                  <li><a href="#"><i class="fa fa-arrow-right"></i></a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
				
			
	
  <!--<div class="call-to-action">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <h2>Are You Looking To Travel ?</h2>
          <h4>Make A Reservation By Clicking The Button</h4>
        </div>
        <div class="col-lg-4">
          <div class="border-button">
            <a href="reservation.html">Book Yours Now</a>
          </div>
        </div>
      </div>
    </div>
  </div>-->

  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <p>Copyright © 2036 <a href="#">WoOx Travel</a> Company. All rights reserved. 
          <br>Design: <a href="https://templatemo.com" target="_blank" title="free CSS templates">TemplateMo</a></p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="/vendor/jquery/jquery.min.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="/assets/js/isotope.min.js"></script>
  <script src="/assets/js/owl-carousel.js"></script>
  <script src="/assets/js/wow.js"></script>
  <script src="/assets/js/tabs.js"></script>
  <script src="/assets/js/popup.js"></script>
  <script src="/assets/js/custom.js"></script>

  <script th:inline="javascript">
    $(".option").click(function(){
      $(".option").removeClass("active");
      $(this).addClass("active"); 
    });
    
    function writeReply() {
		let board_id = /*[[${board.board_id}]]*/'';
		let content = $("#reply").val();
		$.ajax({
			url: "/reply/" + board_id,
			type: "post",
			success: function(data){
				console.log(data);
				getReplies()
			},
			data: {
				"content": content
			},
			error: function(xhr, status, error) {
				console.log(xhr);
				console.log(status);
				console.log(error);
			}
		});
	}
	
	function getReplies() {
		let board_id = /*[[${board.board_id}]]*/'';
		$.ajax({
			url: "/reply/" + board_id,
			success: function(data) {
				console.log(data);
				showReplies(data);
				
			},
			error: function(xhr, status, error){
				console.log(status);
			}
		});
	}
	// 페이지가 로딩되면 getReplies() 함수를 자동으로 실행한다
	$(function(){
		getReplies();
	})
	
	function showReplies(data) {
		$("#replies").html("");
		let str = "";
		str += "<table>";
		str += "  <tr>";
		str += "		<th>No.</th>";
		str += "		<th>작성자</th>";
		str += "		<th style='width: 400px'>내용</th>";
		str += "		<th>작성일</th>";
		str += "	</tr>";
		if(data.length > 0) {
			let loginMemberId = /*[[${#authentication.name}]]*/'';
			$(data).each(function(idx, obj){
				if(loginMemberId == obj.member_id){
				str += "	<tr>";
				str += "		<td class='center'>" + (idx + 1) + "</td>";
				str += "		<td class='center' id='"+ obj.member_id + "' name='member_id'>" + obj.member_id + 
					"</td>";
				str += "		<td>";
				str += "			<textarea row='2' cols='50' id='reply_" + obj.reply_id + "' name='content'>" + 
					obj.content + "</textarea><br>";
				str += "			<input type='button' value='수정' onclick='updateReply("+ obj.reply_id + ")'>";
				str += "			<input type='button' value='삭제' onclick='removeReply("+ obj.reply_id + ")'>";
				str += "		</td>";
				str += "		<td class='center' name='created_time'>" + obj.created_time + "</td>";
				str += "	</tr>";
				str += "	<input type='hidden' name='board_id' id='" + obj.board_id + "'value='" + 
					obj.board_id+ "'>";
				str += "	<input type='hidden' name='reply_id' value='" + obj.reply_id+ "'>";
				} else {
				str += "	<tr>";
				str += "		<td class='center'>" + (idx + 1) + "</td>";
				str += "		<td class='center'>" + obj.member_id + "</td>";
				str += "		<td>" + obj.content + "</td>";
				str += "		<td class='center'>" + obj.created_time + "</td>";
				str += "	</tr>";
				}
			});
			
			str += "</table>";
			$("#replies").append(str);
		} else {
			str += "	<tr>";
			str += "		<td class='center' colspan='4'>등록된 리플이 없습니다.</td>";
			str += "	</tr>";
			str += "</table>";
			$("#replies").append(str);
		}
	}
	
	function updateReply(reply_id) {
		let board_id = /*[[${board.board_id}]]*/'';
		let content = $("#reply_" + reply_id).val();
		let cf = confirm("리플을 수정하시겠습니까?");
		if(cf == true) {
			$.ajax({
				url: "/reply/" + board_id + "/" + reply_id,
				type: "put",
				success: function() {
					getReplies();
				},
				data: {
					"content": content
				},
				error: function(xhr, status, error) {
					console.log(xhr);
					console.log(status);
					console.log(error);
				}
			});
		} else {
			getReplies();
		}
		
	}
	
	function removeReply(reply_id) {
		
		let board_id = /*[[${board.board_id}]]*/'';
		let cf = confirm("리플을 삭제하시겠습니까?");
		if(cf == true) {
			$.ajax({
				url: "/reply/" + board_id + "/" + reply_id,
				type: "delete",
				success: function(){
					getReplies();
				},
				error: function(xhr, status, error) {
					console.log(xhr);
					console.log(status);
					console.log(error);
				}
			});
		}
		
	}
    
  </script>
  </body>

</html> 